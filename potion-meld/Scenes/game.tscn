[gd_scene load_steps=23 format=3 uid="uid://rbtnml6u88wx"]

[ext_resource type="Script" uid="uid://bpmqs7r27ymer" path="res://Scripts/GameManager.gd" id="1_ebmjs"]
[ext_resource type="PackedScene" uid="uid://v6meuafbqk1b" path="res://Scenes/PackedScenes/cauldron.tscn" id="3_3dryh"]
[ext_resource type="Script" uid="uid://cd2cfh6xcjk7q" path="res://Scripts/CameraController.gd" id="3_wowpa"]
[ext_resource type="Environment" uid="uid://kof6le8h2tg8" path="res://Scenes/enviro.tres" id="3_wrm1d"]
[ext_resource type="PackedScene" uid="uid://k461333llrkv" path="res://Models/counter.fbx" id="5_wowpa"]
[ext_resource type="PackedScene" uid="uid://dthtf3qptidiw" path="res://Models/countersides.fbx" id="6_i6g32"]
[ext_resource type="PackedScene" uid="uid://c0h4xqj1tmy8n" path="res://Models/table.fbx" id="7_1l0tm"]
[ext_resource type="PackedScene" uid="uid://2qvi0ha067dj" path="res://Models/door.fbx" id="8_v158k"]
[ext_resource type="PackedScene" uid="uid://clinl35gwqfv1" path="res://Models/window.fbx" id="9_h4fw4"]
[ext_resource type="PackedScene" uid="uid://d32w7ml6ilp8u" path="res://Models/shelves.fbx" id="10_ldgsr"]
[ext_resource type="Texture2D" uid="uid://bb37pfg4ipych" path="res://Textures/component drawer.png" id="11_o5yvi"]
[ext_resource type="Script" uid="uid://g1cpupsbd43p" path="res://Scripts/drawer.gd" id="12_rku1e"]
[ext_resource type="FontFile" uid="uid://6kua1c3ypbxu" path="res://Fonts/Tkachevica-7px Regular.ttf" id="13_1phco"]
[ext_resource type="Script" path="res://Scripts/day_timer.gd" id="13_rfjv2"]

[sub_resource type="Animation" id="Animation_3dryh"]
resource_name = "CameraBob"
length = 5.0
loop_mode = 1
tracks/0/type = "bezier"
tracks/0/imported = false
tracks/0/enabled = true
tracks/0/path = NodePath("Camera3D:position:y")
tracks/0/interp = 1
tracks/0/loop_wrap = true
tracks/0/keys = {
"handle_modes": PackedInt32Array(2, 2, 2),
"points": PackedFloat32Array(2.53, 0, 0, 0.833333, 0, 2.47, -0.833333, 0, 0.833333, 0, 2.53, -0.833333, 0, 0, 0),
"times": PackedFloat32Array(0, 2.5, 5)
}

[sub_resource type="Animation" id="Animation_wowpa"]
length = 0.001
tracks/0/type = "bezier"
tracks/0/imported = false
tracks/0/enabled = true
tracks/0/path = NodePath("Camera3D:position:y")
tracks/0/interp = 1
tracks/0/loop_wrap = true
tracks/0/keys = {
"handle_modes": PackedInt32Array(0),
"points": PackedFloat32Array(2.75, -0.25, 0, 0.25, 0),
"times": PackedFloat32Array(0)
}

[sub_resource type="AnimationLibrary" id="AnimationLibrary_i6g32"]
_data = {
&"CameraBob": SubResource("Animation_3dryh"),
&"RESET": SubResource("Animation_wowpa")
}

[sub_resource type="BoxMesh" id="BoxMesh_wrm1d"]

[sub_resource type="Animation" id="Animation_rfjv2"]
length = 0.001
tracks/0/type = "bezier"
tracks/0/imported = false
tracks/0/enabled = true
tracks/0/path = NodePath("HUD/InventoryPopout:position:x")
tracks/0/interp = 1
tracks/0/loop_wrap = true
tracks/0/keys = {
"handle_modes": PackedInt32Array(0),
"points": PackedFloat32Array(892, -0.25, 0, 0.25, 0),
"times": PackedFloat32Array(0)
}
tracks/1/type = "bezier"
tracks/1/imported = false
tracks/1/enabled = true
tracks/1/path = NodePath("HUD/InventoryPopout:position:y")
tracks/1/interp = 1
tracks/1/loop_wrap = true
tracks/1/keys = {
"handle_modes": PackedInt32Array(0),
"points": PackedFloat32Array(358, -0.25, 0, 0.25, 0),
"times": PackedFloat32Array(0)
}

[sub_resource type="Animation" id="Animation_rku1e"]
resource_name = "open"
length = 0.5
tracks/0/type = "bezier"
tracks/0/imported = false
tracks/0/enabled = true
tracks/0/path = NodePath("HUD/InventoryPopout:position:x")
tracks/0/interp = 1
tracks/0/loop_wrap = true
tracks/0/keys = {
"handle_modes": PackedInt32Array(0, 0),
"points": PackedFloat32Array(892, -0.25, 0, 0.25, 0, 892, -0.25, 0, 0.25, 0),
"times": PackedFloat32Array(0, 0.5)
}
tracks/1/type = "bezier"
tracks/1/imported = false
tracks/1/enabled = true
tracks/1/path = NodePath("HUD/InventoryPopout:position:y")
tracks/1/interp = 1
tracks/1/loop_wrap = true
tracks/1/keys = {
"handle_modes": PackedInt32Array(0, 0),
"points": PackedFloat32Array(598, -0.25, 0, 0.25, 0, 358, -0.25, 0, 0.25, 0),
"times": PackedFloat32Array(0, 0.5)
}

[sub_resource type="AnimationLibrary" id="AnimationLibrary_1phco"]
_data = {
&"RESET": SubResource("Animation_rfjv2"),
&"open": SubResource("Animation_rku1e")
}

[sub_resource type="LabelSettings" id="LabelSettings_nb51f"]
font = ExtResource("13_1phco")

[node name="World" type="Node3D"]

[node name="GameManager" type="Node" parent="."]
script = ExtResource("1_ebmjs")

[node name="Camera3D" type="Camera3D" parent="."]
transform = Transform3D(-1, -2.26267e-08, 8.44439e-08, 0, 0.965926, 0.258819, -8.74228e-08, 0.258819, -0.965926, 0.0873487, 2.75, 0)
environment = ExtResource("3_wrm1d")
script = ExtResource("3_wowpa")
left_transform = Vector3(3, 0, -2)
right_transform = Vector3(-3, 0, -2)
left_y_rot = 270.0
middle_y_rot = 180.0
right_y_rot = 90.0

[node name="DirectionalLight3D" type="DirectionalLight3D" parent="."]
transform = Transform3D(-0.0839388, 0.886015, 0.455995, 0, -0.45761, 0.889153, 0.996471, 0.0746344, 0.0384112, 0.28189, 8.5177, -0.73272)
visible = false
light_color = Color(0.902331, 0.897886, 0.900431, 1)
light_energy = 1.3

[node name="cauldron" parent="." instance=ExtResource("3_3dryh")]
transform = Transform3D(0.258819, 0, -0.965926, 0, 1, 0, 0.965926, 0, 0.258819, -5.5, 0.335503, -1.92449)

[node name="CameraAnim" type="AnimationPlayer" parent="."]
libraries = {
&"": SubResource("AnimationLibrary_i6g32")
}
autoplay = "CameraBob"

[node name="Geometry" type="Node3D" parent="."]

[node name="MeshInstance3D" type="MeshInstance3D" parent="Geometry"]
transform = Transform3D(40, 0, 0, 0, 0.2, 0, 0, 0, 20, 0, -0.15, 0)
mesh = SubResource("BoxMesh_wrm1d")
skeleton = NodePath("../..")

[node name="MeshInstance3D6" type="MeshInstance3D" parent="Geometry"]
transform = Transform3D(40, 0, 0, 0, 0.2, 0, 0, 0, 20, 0, 5.06289, 0)
mesh = SubResource("BoxMesh_wrm1d")
skeleton = NodePath("../..")

[node name="MeshInstance3D2" type="MeshInstance3D" parent="Geometry"]
transform = Transform3D(0.1, 0, 0, 0, 5.25, 0, 0, 0, 10, -10, 2.5, -2.99697)
mesh = SubResource("BoxMesh_wrm1d")
skeleton = NodePath("../..")

[node name="MeshInstance3D4" type="MeshInstance3D" parent="Geometry"]
transform = Transform3D(0.1, 0, 0, 0, 5.25, 0, 0, 0, 8, -6, 2.5, 6.03819)
mesh = SubResource("BoxMesh_wrm1d")
skeleton = NodePath("../..")

[node name="MeshInstance3D5" type="MeshInstance3D" parent="Geometry"]
transform = Transform3D(0.1, 0, 0, 0, 5.25, 0, 0, 0, 8, 6, 2.5, 6.03819)
mesh = SubResource("BoxMesh_wrm1d")
skeleton = NodePath("../..")

[node name="MeshInstance3D7" type="MeshInstance3D" parent="Geometry"]
transform = Transform3D(8, 0, 0, 0, 5.25, 0, 0, 0, 0.1, -7.95, 2.5, 2)
mesh = SubResource("BoxMesh_wrm1d")
skeleton = NodePath("../..")

[node name="MeshInstance3D11" type="MeshInstance3D" parent="Geometry"]
transform = Transform3D(8, 0, 0, 0, 5.25, 0, 0, 0, 0.1, 7.95, 2.5, 2)
mesh = SubResource("BoxMesh_wrm1d")
skeleton = NodePath("../..")

[node name="MeshInstance3D8" type="MeshInstance3D" parent="Geometry"]
transform = Transform3D(20, 0, 0, 0, 5.25, 0, 0, 0, 0.1, 0, 2.5, 9.9475)
mesh = SubResource("BoxMesh_wrm1d")
skeleton = NodePath("../..")

[node name="MeshInstance3D9" type="MeshInstance3D" parent="Geometry"]
transform = Transform3D(30, 0, 0, 0, 5.25, 0, 0, 0, 0.1, 0, 2.5, -10)
mesh = SubResource("BoxMesh_wrm1d")
skeleton = NodePath("../..")

[node name="MeshInstance3D3" type="MeshInstance3D" parent="Geometry"]
transform = Transform3D(0.1, 0, 0, 0, 5.25, 0, 0, 0, 10, 7, 2.5, -3.00481)
mesh = SubResource("BoxMesh_wrm1d")
skeleton = NodePath("../..")

[node name="counter" parent="Geometry" instance=ExtResource("5_wowpa")]
transform = Transform3D(-4.37114e-08, 0, -2, 0, 1, 0, 1, 0, -8.74228e-08, 0, -0.8, 1.75)

[node name="countersides" parent="Geometry" instance=ExtResource("6_i6g32")]
transform = Transform3D(-4.37114e-08, 0, 0.5, 0, 1, 0, -1, 0, -2.18557e-08, 3.76016, 0, 1.97103)

[node name="countersides2" parent="Geometry" instance=ExtResource("6_i6g32")]
transform = Transform3D(7.54979e-08, 0, -0.5, 0, 1, 0, 1, 0, 3.7749e-08, -3.75993, 0, 1.97103)

[node name="table" parent="Geometry" instance=ExtResource("7_1l0tm")]
transform = Transform3D(-0.999991, 0, -0.00431095, 0, 1, 0, 0.00431095, 0, -0.999991, -6.17251, -0.873848, -6.6807)

[node name="door" parent="Geometry" instance=ExtResource("8_v158k")]
transform = Transform3D(-4.37114e-08, 0, 1, 0, 1, 0, -1, 0, -4.37114e-08, 0, 0, 9.883)

[node name="window" parent="Geometry" instance=ExtResource("9_h4fw4")]
transform = Transform3D(-4.37114e-08, 0, 1, 0, 1, 0, -1, 0, -4.37114e-08, 3.5, 0.5, 9.85)

[node name="window2" parent="Geometry" instance=ExtResource("9_h4fw4")]
transform = Transform3D(-4.37114e-08, 0, 1, 0, 1, 0, -1, 0, -4.37114e-08, -3.5, 0.5, 9.85)

[node name="Lights" type="Node3D" parent="."]

[node name="OmniLight3D" type="OmniLight3D" parent="Lights"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 3.49232, 2.92125, 9.10125)
light_color = Color(0.829015, 0.780514, 0.718003, 1)
light_bake_mode = 1
omni_range = 26.15
omni_attenuation = 1.568

[node name="OmniLight3D3" type="OmniLight3D" parent="Lights"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, -0.0569521, 2.82475, 8.922)
light_color = Color(0.829015, 0.780514, 0.718003, 1)
light_bake_mode = 1
omni_range = 26.15
omni_attenuation = 1.568

[node name="OmniLight3D4" type="OmniLight3D" parent="Lights"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, -2.4676, 2.82475, 1.97566)
light_color = Color(0.681653, 0.808096, 0.898368, 1)
light_bake_mode = 1
omni_range = 26.15
omni_attenuation = 1.568

[node name="OmniLight3D6" type="OmniLight3D" parent="Lights"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, -5.4854, 1.83404, -1.92296)
light_color = Color(0.877482, 0.722161, 0.938652, 1)
omni_range = 26.15
omni_attenuation = 1.568

[node name="OmniLight3D7" type="OmniLight3D" parent="Lights"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, -6.85923, 2.80147, -3.0412)
light_color = Color(0.894833, 0.758554, 0.656189, 1)
light_bake_mode = 1
omni_range = 26.15
omni_attenuation = 1.568

[node name="OmniLight3D5" type="OmniLight3D" parent="Lights"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 1.83024, 2.82475, 1.97566)
light_color = Color(0.527842, 0.8687, 0.750013, 1)
light_bake_mode = 1
omni_range = 26.15
omni_attenuation = 1.568

[node name="OmniLight3D2" type="OmniLight3D" parent="Lights"]
transform = Transform3D(0.999998, 0.00191202, 0.000613427, -0.00191117, 0.999997, -0.00139284, -0.000616088, 0.00139166, 0.999999, -3.5076, 2.92817, 9.10334)
light_color = Color(0.827451, 0.780392, 0.717647, 1)
light_bake_mode = 1
omni_range = 26.15
omni_attenuation = 1.568

[node name="SpotLight3D" type="SpotLight3D" parent="Lights"]
transform = Transform3D(0.860797, 0.377636, -0.341204, -0.00191117, 0.672802, 0.73982, 0.508946, -0.636182, 0.579868, 3.4099, 2.97755, 9.77021)
light_color = Color(0.828914, 0.783985, 0.683765, 1)
light_bake_mode = 1
spot_range = 13.704
spot_attenuation = 0.5

[node name="SpotLight3D3" type="SpotLight3D" parent="Lights"]
transform = Transform3D(1, 0, 0, 0, -4.37114e-08, 1, 0, -1, -4.37114e-08, -0.00653791, 4.90199, 3.82182)
light_color = Color(0.888237, 0.772967, 0.539318, 1)
light_energy = 2.0
spot_range = 15.0
spot_attenuation = 0.5
spot_angle = 60.0

[node name="SpotLight3D4" type="SpotLight3D" parent="Lights"]
transform = Transform3D(0.908705, 1.82468e-08, -0.417439, 0.417439, -3.97208e-08, 0.908705, 0, -1, -4.37114e-08, 5.48545, 4.90199, -2.59816)
light_color = Color(0.591055, 0.847693, 0.797202, 1)
light_energy = 3.0
spot_range = 25.0
spot_angle = 75.0

[node name="SpotLight3D5" type="SpotLight3D" parent="Lights"]
transform = Transform3D(0.383046, -0.329378, -0.86301, 0.914013, -1.7733e-08, 0.405684, -0.133623, -0.944198, 0.301055, -15.8542, 4.90199, -8.38715)
light_color = Color(0.932267, 0.726712, 0.746212, 1)
light_energy = 2.0
spot_range = 10.0
spot_attenuation = 0.5

[node name="SpotLight3D2" type="SpotLight3D" parent="Lights"]
transform = Transform3D(0.860797, 0.377636, -0.341204, -0.00191117, 0.672802, 0.73982, 0.508946, -0.636182, 0.579867, -3.52312, 2.97755, 9.77021)
light_color = Color(0.828914, 0.783985, 0.683765, 1)
light_bake_mode = 1
spot_range = 13.704
spot_attenuation = 0.5

[node name="shelves" parent="." instance=ExtResource("10_ldgsr")]
transform = Transform3D(-1, 0, 8.74228e-08, 0, 1, 0, -8.74228e-08, 0, -1, 6.591, -1.1877, -2)

[node name="HUD" type="Control" parent="."]
layout_mode = 3
anchors_preset = 15
anchor_right = 1.0
anchor_bottom = 1.0
grow_horizontal = 2
grow_vertical = 2

[node name="InventoryPopout" type="TextureButton" parent="HUD"]
texture_filter = 1
layout_mode = 1
anchors_preset = 3
anchor_left = 1.0
anchor_top = 1.0
anchor_right = 1.0
anchor_bottom = 1.0
offset_left = -260.0
offset_top = -290.0
offset_right = -208.0
offset_bottom = -222.0
grow_horizontal = 0
grow_vertical = 0
scale = Vector2(5, 5)
texture_normal = ExtResource("11_o5yvi")
script = ExtResource("12_rku1e")

[node name="AnimationPlayer" type="AnimationPlayer" parent="HUD/InventoryPopout"]
root_node = NodePath("../../..")
libraries = {
&"": SubResource("AnimationLibrary_1phco")
}

[node name="InvSlot1" type="Control" parent="HUD/InventoryPopout"]
anchors_preset = 0
offset_left = 10.0
offset_top = 10.0
offset_right = 26.0
offset_bottom = 26.0

[node name="InvSlot2" type="Control" parent="HUD/InventoryPopout"]
anchors_preset = 0
offset_left = 26.0
offset_top = 10.0
offset_right = 42.0
offset_bottom = 26.0

[node name="InvSlot3" type="Control" parent="HUD/InventoryPopout"]
anchors_preset = 0
offset_left = 10.0
offset_top = 26.0
offset_right = 26.0
offset_bottom = 42.0

[node name="InvSlot4" type="Control" parent="HUD/InventoryPopout"]
anchors_preset = 0
offset_left = 26.0
offset_top = 26.0
offset_right = 42.0
offset_bottom = 42.0

[node name="InvSlot5" type="Control" parent="HUD/InventoryPopout"]
anchors_preset = 0
offset_left = 10.0
offset_top = 42.0
offset_right = 26.0
offset_bottom = 58.0

[node name="InvSlot6" type="Control" parent="HUD/InventoryPopout"]
anchors_preset = 0
offset_left = 26.0
offset_top = 42.0
offset_right = 42.0
offset_bottom = 58.0

[node name="DayTimerTest" type="Label" parent="HUD"]
layout_mode = 1
anchors_preset = 2
anchor_top = 1.0
anchor_bottom = 1.0
offset_top = -23.0
offset_right = 40.0
grow_vertical = 0
text = "test"
label_settings = SubResource("LabelSettings_nb51f")
script = ExtResource("13_rfjv2")

[node name="Timer" type="Timer" parent="HUD/DayTimerTest"]
autostart = true

[node name="CauldronDropHitbox" type="TextureButton" parent="HUD"]
layout_mode = 0
offset_left = 468.0
offset_top = 241.0
offset_right = 508.0
offset_bottom = 281.0

[connection signal="ready" from="Geometry/MeshInstance3D8" to="HUD/InventoryPopout" method="_on_mesh_instance_3d_8_ready"]
[connection signal="pressed" from="HUD/InventoryPopout" to="HUD/InventoryPopout" method="_on_pressed"]
[connection signal="ready" from="HUD/InventoryPopout" to="HUD/InventoryPopout" method="_on_ready"]
[connection signal="mouse_entered" from="HUD/InventoryPopout/InvSlot1" to="HUD/InventoryPopout/InvSlot1" method="_on_mouse_entered"]
[connection signal="mouse_exited" from="HUD/InventoryPopout/InvSlot1" to="HUD/InventoryPopout/InvSlot1" method="_on_mouse_exited"]
[connection signal="mouse_entered" from="HUD/InventoryPopout/InvSlot2" to="HUD/InventoryPopout/InvSlot2" method="_on_mouse_entered"]
[connection signal="mouse_exited" from="HUD/InventoryPopout/InvSlot2" to="HUD/InventoryPopout/InvSlot2" method="_on_mouse_exited"]
[connection signal="mouse_entered" from="HUD/InventoryPopout/InvSlot3" to="HUD/InventoryPopout/InvSlot3" method="_on_mouse_entered"]
[connection signal="mouse_exited" from="HUD/InventoryPopout/InvSlot3" to="HUD/InventoryPopout/InvSlot3" method="_on_mouse_exited"]
[connection signal="mouse_entered" from="HUD/InventoryPopout/InvSlot4" to="HUD/InventoryPopout/InvSlot4" method="_on_mouse_entered"]
[connection signal="mouse_exited" from="HUD/InventoryPopout/InvSlot4" to="HUD/InventoryPopout/InvSlot4" method="_on_mouse_exited"]
[connection signal="mouse_entered" from="HUD/InventoryPopout/InvSlot5" to="HUD/InventoryPopout/InvSlot5" method="_on_mouse_entered"]
[connection signal="mouse_exited" from="HUD/InventoryPopout/InvSlot5" to="HUD/InventoryPopout/InvSlot5" method="_on_mouse_exited"]
[connection signal="mouse_entered" from="HUD/InventoryPopout/InvSlot6" to="HUD/InventoryPopout/InvSlot6" method="_on_mouse_entered"]
[connection signal="mouse_exited" from="HUD/InventoryPopout/InvSlot6" to="HUD/InventoryPopout/InvSlot6" method="_on_mouse_exited"]
[connection signal="ready" from="HUD/DayTimerTest" to="HUD/DayTimerTest" method="_on_ready"]
[connection signal="timeout" from="HUD/DayTimerTest/Timer" to="HUD/DayTimerTest" method="_on_timer_timeout"]
